<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FocusGuard AI</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><circle cx=%2250%22 cy=%2250%22 r=%2240%22 fill=%22%234285F4%22/><circle cx=%2250%22 cy=%2250%22 r=%2215%22 fill=%22white%22/></svg>">
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="/static/css/app.css">
</head>
<body>
    <div class="blob blob-1"></div>
    <div class="blob blob-2"></div>

    <header>
        <div class="brand">FocusGuard AI</div>
        <nav class="header-nav">
            <a href="/" class="nav-link">Home</a>
            <a href="/app" class="nav-link active">Focus</a>
            <a href="/dashboard" class="nav-link">Dashboard</a>
            <a href="/settings" class="nav-link">Settings</a>
            <select class="voice-select" id="voiceSelect">
                <option value="auto">üé≤ Random Voice</option>
                <option value="paimon">‚ú® Paimon</option>
                <option value="mickey">üê≠ Mickey Mouse</option>
                <option value="morgan">üé¨ Morgan Freeman</option>
                <option value="chipmunk">üêøÔ∏è Chipmunk</option>
                <option value="vader">‚ö´ Darth Vader</option>
                <option value="anime">üå∏ Anime Girl</option>
                <option value="robot">ü§ñ Robot</option>
                <option value="ghost">üëª Ghostface</option>
                <option value="female">üë© Female</option>
                <option value="male">üë® Male</option>
            </select>
            <button class="cam-toggle-btn" id="camToggleBtn" title="Toggle Camera Preview">üì∑</button>
        </nav>
    </header>

    <div class="main-container">
        <div class="glass-panel">
            <div class="status-badge" id="monitorStatus">
                <span class="status-dot"></span>
                System Standby
            </div>
            
            <div class="stats-row">
                <div class="stat-item">
                    <div class="stat-value" id="focusTimer">00:00</div>
                    <div class="stat-label">Focus Time</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value stat-streak" id="streakCounter">0m</div>
                    <div class="stat-label">Direct Streak</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value stat-roast" id="roastCounter">0</div>
                    <div class="stat-label">Interventions</div>
                </div>
            </div>

            <div class="video-container">
                <video id="input_video" autoplay muted></video>
                <canvas id="output_canvas"></canvas>
                
                <div class="meme-overlay" id="memeOverlay">
                    <div class="meme-content">
                        <div class="god-mode-text">GOD LIKE FOCUS!</div>
                        <img id="memeImage" src="" alt="Motivation">
                    </div>
                </div>

                <div class="hud-overlay">
                    <div>FACE_TRACK: <span id="hudFace">OFF</span></div>
                    <div>EYE_AR: <span id="hudEAR">0.00</span></div>
                    <div>IRIS_POS: <span id="hudIris">--</span></div>
                    <div>POSE_YAW: <span id="hudYaw">0.00</span></div>
                </div>
            </div>

            <div class="controls-row">
                <label class="checkbox-label">
                    <input type="checkbox" id="meshToggle" checked>
                    <span>Show Neural Mesh</span>
                </label>
            </div>

            <div class="controls">
                <button class="btn btn-start" id="startBtn">Start Focus</button>
                <button class="btn btn-stop" id="stopBtn">End Session</button>
            </div>
        </div>

        <div class="log-panel" id="logPanel">
            <div>[SYSTEM] Ready to initialize...</div>
        </div>
    </div>

    <div class="report-modal" id="reportCardStyle">
        <h2 class="report-title">Session Report Card</h2>
        <div class="report-row">
            <span>Focus Duration:</span>
            <span class="report-value" id="rcDuration">00:00</span>
        </div>
        <div class="report-row">
            <span>Total Distractions:</span>
            <span class="report-value report-value-red" id="rcRoasts">0</span>
        </div>
        <div class="report-row report-row-last">
            <span>Avg Recovery Time:</span>
            <span class="report-value report-value-green" id="rcRecovery">0s</span>
        </div>
        <div class="verdict-box">
            <div class="verdict-label">TOXIC COACH VERDICT</div>
            <div class="verdict-text" id="rcVerdict">"Calculating judgment..."</div>
        </div>
        <button class="btn btn-start btn-full" onclick="location.reload()">Close</button>
    </div>

    <div class="roast-modal" id="roastModal">
        <img id="roastMeme" class="roast-meme" src="" alt="Roast Meme" style="display:none;">
        <div class="roast-content">
            <div class="roast-label">Toxic Homie Says:</div>
            <div id="roastText">"Get back to work!"</div>
        </div>
    </div>

    <!-- Floating Camera Preview (Toggle with button) -->
    <div class="floating-cam" id="floatingCam">
        <button class="floating-cam-close" onclick="toggleFloatingCam()">&times;</button>
        <video id="previewVideo" autoplay muted></video>
        <div class="floating-cam-label">üì∑ You</div>
    </div>

    <script src="/static/js/app.js"></script>
</body>
</html>
